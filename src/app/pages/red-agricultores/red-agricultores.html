<div class="page-header">
  <h1>{{ 'red.title' | translate }}</h1>
  <p>{{ 'red.subtitle' | translate }}</p>
</div>

<div class="red-layout">

  <section class="main-forum-content">

    <h2>{{ 'red.newPost' | translate }}</h2>
    <form class="new-post-card" (ngSubmit)="publishPost()">
      <label class="new-post-field">
        <span>{{ 'red.topicLabel' | translate }}</span>
        <select [(ngModel)]="selectedCategory" name="category">
          @for (option of categoryOptions; track option.value) {
            <option [value]="option.value">{{ option.labelKey | translate }}</option>
          }
        </select>
      </label>
      <label class="new-post-field">
        <span class="visually-hidden">{{ 'red.newPost' | translate }}</span>
        <textarea
          [placeholder]="'red.newPostPlaceholder' | translate"
          [(ngModel)]="newPostContent"
          name="newPost"
          maxlength="280"
        ></textarea>
      </label>
      <div class="post-actions">
        <span class="char-count">{{ newPostContent.length }}/280</span>
        <button type="submit" class="btn-primary small" [disabled]="!newPostContent.trim()">
          {{ 'red.postBtn' | translate }}
        </button>
      </div>
      <p class="feedback" *ngIf="feedbackKey" aria-live="polite">
        {{ feedbackKey | translate }}
      </p>
    </form>

    <h2>{{ 'red.recentPosts' | translate }}</h2>

    <p class="empty-state" *ngIf="!posts.length">
      {{ 'red.emptyState' | translate }}
    </p>

    <article class="post-item" *ngFor="let post of posts">
      <div class="post-header">
        <span class="user-avatar">{{ post.avatar }}</span>
        <div class="post-info">
          <p class="username">{{ post.author }}</p>
          <p class="post-time">
            {{ post.categoryKey | translate }}
            <span *ngIf="post.timeAgoKey"> Â· {{ post.timeAgoKey | translate }}</span>
          </p>
        </div>
      </div>
      <h4 class="post-title">
        <ng-container *ngIf="post.titleKey; else customTitle">{{ post.titleKey | translate }}</ng-container>
        <ng-template #customTitle>{{ post.title }}</ng-template>
      </h4>
      <p class="post-body">
        <ng-container *ngIf="post.bodyKey; else customBody">{{ post.bodyKey | translate }}</ng-container>
        <ng-template #customBody>{{ post.body }}</ng-template>
      </p>
      <div class="post-stats">
        <span>ğŸ‘ {{ post.likes }} <span>{{ 'red.likes' | translate }}</span></span>
        <span>ğŸ’¬ {{ post.comments }} <span>{{ 'red.comments' | translate }}</span></span>
      </div>
    </article>
  </section>

  <aside class="red-sidebar">
    <div class="sidebar-card popular-topics">
      <h3>{{ 'red.popularTopics' | translate }}</h3>
      <ul class="topics-list">
        <li><a href="#">{{ 'red.hashtag.organic' | translate }}</a></li>
        <li><a href="#">{{ 'red.hashtag.tomato' | translate }}</a></li>
        <li><a href="#">{{ 'red.hashtag.winterPests' | translate }}</a></li>
        <li><a href="#">{{ 'red.hashtag.drones' | translate }}</a></li>
      </ul>
    </div>

    <div class="sidebar-card suggested-users">
      <h3>{{ 'red.suggestedFarmers' | translate }}</h3>
      <ul class="users-list">
        <li><span class="user-avatar">A</span> Ana GÃ³mez</li>
        <li><span class="user-avatar">R</span> Roberto Salas</li>
      </ul>
    </div>
  </aside>
</div>
